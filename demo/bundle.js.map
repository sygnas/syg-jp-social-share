{"version":3,"file":"bundle.js","sources":["../dist/es6/index.js","src/demo.ts"],"sourcesContent":["import { defineProperty as _defineProperty, createClass as _createClass, classCallCheck as _classCallCheck } from './_virtual/_rollupPluginBabelHelpers.js';\n\n/**\n * 日本向けソーシャルシェアボタン\n *\n * @author   Hiroshi Fukuda <info.sygnas@gmail.com>\n * @license  MIT\n */\nvar JpSocialShare = /*#__PURE__*/function () {\n  function JpSocialShare() {\n    _classCallCheck(this, JpSocialShare);\n  }\n\n  _createClass(JpSocialShare, null, [{\n    key: \"setShareButton\",\n    value: // サービス名識別子\n    ////////////////////////\n    ////////////////////////\n\n    /**\n     * シェアボタンのリンクを設定する\n     * @param {String} target 対象ボタンのセレクタ\n     * @param {Object} option 新規ウィンドウのパラメータ（defaults参照）\n     */\n    function setShareButton(target) {\n      var _this = this;\n\n      var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      // 設定のマージ\n      this.opt = Object.assign(this.defaults, option); // クリックイベントを設定\n\n      this.getNodeArray(document.querySelectorAll(target)).forEach(function (elm) {\n        elm.addEventListener('click', function (ev) {\n          var elm = ev.currentTarget;\n\n          _this.openShareWindowWithElement(elm);\n\n          ev.preventDefault();\n        });\n      });\n    }\n    /**\n     * エレメントから情報を取得してシェア用ウィンドウを開く\n     */\n\n  }, {\n    key: \"openShareWindowWithElement\",\n    value: function openShareWindowWithElement(elm) {\n      // エレメントからパラメータを取得\n      var service = elm.getAttribute('data-share-service');\n      var url = elm.getAttribute('data-share-url') || '';\n      var message = elm.getAttribute('data-share-message') || document.title;\n      var account = elm.getAttribute('data-share-account') || '';\n      var follow = elm.getAttribute('data-share-follow') || ''; // シェア用ウィンドウを開く\n\n      this.openShareWindow(service, url, message, account, follow);\n    }\n    /**\n     * シェア用ウィンドウを開く\n     * @param service {String} ソーシャルサービス識別子\n     * @param url {String} シェアURL\n     * @param message {String} メッセージ本文\n     * @param account {String} ツイートに付けるRepleyアカウント\n     * @param follow {String} ツイート後に表示するフォロー候補アカウント\n     */\n\n  }, {\n    key: \"openShareWindow\",\n    value: function openShareWindow(service) {\n      var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var message = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var account = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n      var follow = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n\n      // 存在しないサービスだったらエラー\n      if (this.opt.services && Object.keys(this.opt.services).indexOf(service) === -1) {\n        console.log(\"\".concat(service, \" is not supported.\"));\n        return;\n      } // テンプレートからコンバート\n\n\n      var openUrl = this.convertOpenUrl(service, url, message, account, follow); // LINEはアプリに飛ばす。それ以外はウィンドウを開く\n\n      if (service === this.SERVICES.LINE) {\n        window.location.href = openUrl;\n      } else if (this.opt.window) {\n        var windowOption = this.getWindowOption(this.opt.window);\n        window.open(openUrl, \"share_\".concat(service), windowOption);\n      } else {\n        console.log('Window option is not defined.');\n        return;\n      }\n    } ////////////////////////\n    ////////////////////////\n\n    /**\n     * サービス毎のURLを取得\n     * パラメータによっては加工がされる\n     * @param service {String} ソーシャルサービス識別子\n     * @param url {String} シェアURL\n     * @param message {String} メッセージ本文\n     * @param account {String} ツイートに付けるRepleyアカウント\n     * @param follow {String} ツイート後に表示するフォロー候補アカウント\n     * @return {String} シェア窓オープンURL\n     */\n\n  }, {\n    key: \"convertOpenUrl\",\n    value: function convertOpenUrl(service) {\n      var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var message = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var account = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n      var follow = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n      var eu = encodeURIComponent;\n      var shareUrl = url || location.href;\n      var openUrl = this.opt.services ? this.opt.services[service] : \"\";\n\n      if (!openUrl) {\n        console.log(\"\".concat(service, \" is not supported.\"));\n        return \"\";\n      } // Twitterだけパラメータの内容によってURLが変わる\n\n\n      if (service === this.SERVICES.TWITTER) {\n        if (!account) openUrl = openUrl.replace(\"&via={{ACCOUNT}}\", \"\");\n        if (!follow) openUrl = openUrl.replace(\"&related={{FOLLOW}}\", \"\");\n      }\n\n      openUrl = openUrl.replace(\"{{ACCOUNT}}\", eu(account));\n      openUrl = openUrl.replace(\"{{FOLLOW}}\", eu(follow));\n      openUrl = openUrl.replace(\"{{MESSAGE}}\", eu(message));\n      openUrl = openUrl.replace(\"{{URL}}\", eu(shareUrl));\n      return openUrl;\n    }\n    /**\n     * NodeListをArrayとして取り出す（IE対策）\n     */\n\n  }, {\n    key: \"getNodeArray\",\n    value: function getNodeArray(nodeList) {\n      return Array.prototype.slice.call(nodeList, 0);\n    }\n    /**\n     * Windowパラメータ作成\n     * @param opt {Object} ウィンドウパラメータ\n     * @return {String} 新規ウィンドウのパラメータ文字列\n     */\n\n  }, {\n    key: \"getWindowOption\",\n    value: function getWindowOption(opt) {\n      var items = [];\n      Object.keys(opt).forEach(function (key) {\n        items.push(\"\".concat(key, \"=\").concat(opt[key]));\n      });\n      return items.join(\",\");\n    }\n  }]);\n\n  return JpSocialShare;\n}();\n\n_defineProperty(JpSocialShare, \"SERVICES\", {\n  TWITTER: 'twitter',\n  FACEBOOK: 'facebook',\n  LINE: 'line',\n  FEEDLY: 'feedly',\n  POCKET: 'pocket',\n  HATEBU: 'hatebu'\n});\n\n_defineProperty(JpSocialShare, \"opt\", void 0);\n\n_defineProperty(JpSocialShare, \"defaults\", {\n  // window.open() のオプション\n  window: {\n    width: 550,\n    height: 450,\n    personalbar: 0,\n    toolbar: 0,\n    scrollbars: 1,\n    resizable: 1\n  },\n  // シェア用URLのテンプレート\n  services: {\n    twitter: 'http://twitter.com/share?url={{URL}}&text={{MESSAGE}}&via={{ACCOUNT}}&related={{FOLLOW}}',\n    facebook: 'http://www.facebook.com/share.php?u={{URL}}',\n    line: 'line://msg/text/{{MESSAGE}} {{URL}}',\n    feedly: 'http://feedly.com/i/subscription/feed/{{URL}}',\n    pocket: 'http://getpocket.com/edit?url={{URL}}',\n    hatebu: '//b.hatena.ne.jp/add?mode=confirm&url={{URL}}&title={{MESSAGE}}'\n  }\n});\n\nexport { JpSocialShare as default };\n//# sourceMappingURL=index.js.map\n",null],"names":["JpSocialShare","option","Object","document","elm","ev","service","url","message","account","follow","console","openUrl","window","windowOption","eu","shareUrl","location","Array","items","opt","TWITTER","FACEBOOK","LINE","FEEDLY","POCKET","HATEBU","width","height","personalbar","toolbar","scrollbars","resizable","services","twitter","facebook","line","feedly","pocket","hatebu","socialShare","setShareButton","btn","querySelector","addEventListener","openShareWindow","SERVICES"],"mappings":"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"}